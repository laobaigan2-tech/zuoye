# Lambda 表达式详解

## 1. 核心定义
**Lambda表达式**是一种用于创建简洁、匿名（没有名字）函数的语法。它允许你在需要函数的地方，快速地“现场”定义一个简单的功能，而无需使用标准的 `def` 关键字进行完整的函数定义。你可以将它理解为一个 **“一次性”** 或 **“即用即弃”** 的函数。

## 2. 关键特征
- **匿名性**：Lambda 函数没有显式的函数名，因此也称为匿名函数。
- **简洁性**：语法极为紧凑，通常用于表达简单的逻辑（理想情况下只有一行表达式）。
- **灵活性**：可以像普通变量一样被传递、赋值，或作为参数传递给其他高阶函数（如 `map`, `filter`, `sorted`）。
- **局限性**：设计初衷是处理简单的操作。其函数体通常只包含一个**表达式**，而不能包含复杂的逻辑或多条语句（如循环、`return` 等）。

## 3. 简单类比
想象一下你在一家快餐店点餐：
- **普通函数**就像餐厅的固定菜单，每道菜（函数）都有明确的名字（函数名）和复杂的制作步骤（函数体）。
- **Lambda表达式**则像是“单点套餐”：你不需要知道这个组合叫什么名字，只是临时告诉厨师：“我要一个汉堡加一杯可乐”（一个简单的逻辑）。说完即用，用完即走，不需要为这个临时组合专门起个菜名并印到菜单上。

## 4. 代码示例
以下是一个使用 Python 语言的示例，它清晰地展示了 lambda 的语法和应用场景。

```python
# ====================================
# 示例 1：基本语法与对比
# ====================================

# 1.1 使用 def 定义一个普通函数，用于计算平方
def square_def(x):
    return x * x

# 1.2 使用 lambda 定义一个功能完全相同的匿名函数
# 语法：lambda 参数: 返回值表达式
square_lambda = lambda x: x * x

# 测试两个函数
num = 5
print(f"使用 def 函数计算 {num} 的平方: {square_def(num)}")
print(f"使用 lambda 函数计算 {num} 的平方: {square_lambda(num)}")
print("-" * 30)

# ====================================
# 示例 2：作为参数传递（最经典的用法）
# ====================================

# 有一个数字列表
numbers = [1, 5, 3, 8, 2]

# 2.1 使用 sorted 函数的 key 参数进行排序
# 目标：按每个数字的个位数（除以10的余数）大小排序
# 这里 lambda 函数临时定义了排序的“规则”
sorted_by_unit = sorted(numbers, key=lambda x: x % 10)
print(f"原始列表: {numbers}")
print(f"按个位数排序后: {sorted_by_unit}")
print("-" * 30)

# 2.2 使用 map 函数对列表中每个元素进行转换
# 目标：将每个数字转换为它的字符串形式并加上前缀
# lambda 函数定义了“如何转换”每个元素
result_list = list(map(lambda x: f"数值_{x}", numbers))
print(f"使用 map 和 lambda 转换列表: {result_list}")
print("-" * 30)

# 2.3 使用 filter 函数过滤列表
# 目标：筛选出所有大于 3 的数字
# lambda 函数定义了“过滤条件”（返回 True 或 False）
filtered_list = list(filter(lambda x: x > 3, numbers))
print(f"使用 filter 和 lambda 过滤出大于3的数: {filtered_list}")

# ====================================
# 示例 3：直接调用（不常见，但有助于理解）
# ====================================
# lambda 表达式本身就像一个未命名的函数对象
# 你可以通过在后面加括号并传入参数来立即调用它
result = (lambda a, b: a + b)(10, 20)
print(f"直接调用 lambda 计算 10 + 20: {result}")
```

**输出结果：**
```
使用 def 函数计算 5 的平方: 25
使用 lambda 函数计算 5 的平方: 25
------------------------------
原始列表: [1, 5, 3, 8, 2]
按个位数排序后: [1, 2, 3, 5, 8]
------------------------------
使用 map 和 lambda 转换列表: ['数值_1', '数值_5', '数值_3', '数值_8', '数值_2']
------------------------------
使用 filter 和 lambda 过滤出大于3的数: [5, 8]
直接调用 lambda 计算 10 + 20: 30
```

## 5. 常见问题

**Q1: Lambda 和用 `def` 定义的普通函数主要区别是什么？何时该用 Lambda？**

**A1:** 主要区别在于：
- **命名与复杂度**：`def` 用于定义可复用、具有名称、逻辑复杂的函数。Lambda 用于定义简单的、匿名的、一次性使用的函数。
- **应用场景**：当你需要向一个高阶函数（如 `sorted`, `map`, `filter`）传递一个简单的“规则”或“操作”时，使用 Lambda 最为方便和清晰。如果你的逻辑需要多行语句、循环或后续多次调用，则应使用 `def`。

**Q2: Lambda 函数能处理多个参数或多个返回值吗？**

**A2:**
- **多个参数**：可以。例如 `lambda x, y: x + y`。
- **多个返回值**：可以以元组（或列表、字典）的形式“间接”返回。例如 `lambda x: (x*2, x*3)` 会返回一个包含两个值的元组。但其函数体仍然必须是一个单一的表达式。

**Q3: Lambda 函数会降低代码可读性吗？**

**A3:** 如果滥用，会。Lambda 的设计初衷是**简化而非复杂化**。一条好的经验法则是：如果 Lambda 表达式看起来已经有点长或难以一眼看懂，那么就应该考虑使用具名的 `def` 函数来代替。永远将代码的清晰度和可维护性放在首位。例如，一个包含复杂条件判断的 Lambda 通常就超出了其适用范畴。